"use strict";(self.webpackChunk_buidlerlabs_hashgraph_venin_docs=self.webpackChunk_buidlerlabs_hashgraph_venin_docs||[]).push([[831],{1262:(e,n,t)=>{t.d(n,{Z:()=>o});var a=t(7294),i=t(2389);function o(e){var n=e.children,t=e.fallback;return(0,i.Z)()?a.createElement(a.Fragment,null,null==n?void 0:n()):null!=t?t:null}},4745:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>N,contentTitle:()=>w,default:()=>b,frontMatter:()=>g,metadata:()=>f,toc:()=>v});var a=t(7462),i=t(3366),o=t(7294),l=t(3905),r=t(1839),s=t(1262),c=t(4165),d=t(5861),p=t(867),u={description:"Hashgraph Venin Documentation",icon:"https://www.hashpack.app/img/logo.svg",name:"hVenin"},m=function(){var e=function(e){if(e){var n=function(){var n=(0,d.Z)((0,c.Z)().mark((function n(){var t;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.getAccountBalance();case 2:return t=n.sent,n.abrupt("return",t&&t.hbars);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();window.hedera=e,s(e),n().then((function(e){i(e.toString())}))}},n=o.useContext(p.L).Bridges,t=o.useState(null),a=t[0],i=t[1],l=o.useState(null),r=l[0],s=l[1],m=function(){var t=(0,d.Z)((0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.HashPackWallet.newConnection({networkName:"testnet",debug:!1,appMetadata:u}).then((function(n){e(n)}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return o.useEffect((function(){n&&n.HashPackWallet.getConnection(!1).then((function(n){null!==n&&e(n)}))}),[n]),o.createElement("center",{style:{margin:"16px"}},r?o.createElement(h,{accountId:r.getAccountId().toString()||"",balance:a,onDisconnect:function(){r.disconnect(),i(null),s(null)}}):o.createElement("button",{className:n?"wallet-connect connect":"wallet-connect loading",enabled:null!=n,onClick:m},n?"CONNECT WALLET":"Loading"))},h=function(e){var n=e.accountId,t=e.balance,a=e.onDisconnect;return o.createElement("div",{className:"connected-stats"},o.createElement("div",{className:"info"},o.createElement("span",{className:"id"},n),o.createElement("span",{className:"balance"},t||"-")),o.createElement("button",{className:"wallet-connect disconnect",onClick:a},"Disconnect"))},k=["components"],g={id:"wallet",title:"Wallets"},w=void 0,f={unversionedId:"markdown/guides/wallet",id:"markdown/guides/wallet",title:"Wallets",description:"HIP-338 compliant",source:"@site/src.docs/markdown/guides/wallet.md",sourceDirName:"markdown/guides",slug:"/markdown/guides/wallet",permalink:"/markdown/guides/wallet",draft:!1,editUrl:"https://github.com/buidler-labs/hashgraph-venin-docs/edit/main/src.docs/markdown/guides/wallet.md",tags:[],version:"current",lastUpdatedBy:"Victor Holotescu",lastUpdatedAt:1669214508,formattedLastUpdatedAt:"Nov 23, 2022",frontMatter:{id:"wallet",title:"Wallets"},sidebar:"docs",previous:{title:"Bundling",permalink:"/markdown/guides/bundling"},next:{title:"The Session",permalink:"/markdown/guides/session"}},N={},v=[{value:"HIP-338 compliant",id:"hip-338-compliant",level:2},{value:"Under the hood",id:"under-the-hood",level:2},{value:"Configuring",id:"configuring",level:2}],y={toc:v};function b(e){var n=e.components,t=(0,i.Z)(e,k);return(0,l.kt)("wrapper",(0,a.Z)({},y,t,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("h2",{id:"hip-338-compliant"},(0,l.kt)("a",{parentName:"h2",href:"https://hips.hedera.com/hip/hip-338"},"HIP-338")," compliant"),(0,l.kt)("p",null,"We might be the first non-official library to support Hedera's standardized wallet proposal and we're damn proud of it."),(0,l.kt)("p",null,"Want to give it a spin? Make sure you have ",(0,l.kt)("a",{parentName:"p",href:"https://www.hashpack.app/"},"HashPack installed")," and then connect to the docs page by clicking"),(0,l.kt)(s.Z,{fallback:(0,l.kt)("p",null,"Wallet Button"),mdxType:"BrowserOnly"},(function(){return(0,l.kt)(m,{mdxType:"HeadStarterConnectWallet"})})),(0,l.kt)("p",null,"Then get a hold of ",(0,l.kt)("a",{parentName:"p",href:"/markdown/configuration#HEDERAS_WALLET_TYPE"},"a Session that targets a ",(0,l.kt)("inlineCode",{parentName:"a"},"Browser")," wallet")," and use it normally:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js",metastring:"live",live:!0},'const { session } = await ApiSession.default({ wallet: { type: "Browser" } });\nconst liveJson = await session.upload(new Json({ theAnswer: 42 }));\n\nlog(`Wallet account id used: ${session.wallet.account.id}`);\nlog(`Json is stored at ${liveJson.id}`);\nlog(`The answer is: ${liveJson.theAnswer}`);\n')),(0,l.kt)("admonition",{type:"note"},(0,l.kt)("p",{parentName:"admonition"},"We need here to intentionally specify the ",(0,l.kt)("inlineCode",{parentName:"p"},"{ wallet: { type: 'Browser' } }")," object argument to ",(0,l.kt)("inlineCode",{parentName:"p"},"ApiSession.default")," otherwise, ",(0,l.kt)("a",{parentName:"p",href:"/markdown/configuration#parameters-resolution"},"fallowing normal parameters resolution"),", the strato bundle would have defaulted to using the implicit ",(0,l.kt)("inlineCode",{parentName:"p"},"Sdk")," wallet type which was configured when bundling for use with these docs. This is actually the case for other live-code edits present on other pages.")),(0,l.kt)("admonition",{type:"warning"},(0,l.kt)("p",{parentName:"admonition"},"Due to Hedera's pricing model as well as ",(0,l.kt)("inlineCode",{parentName:"p"},"Query")," mechanics and, in general, overall ",(0,l.kt)("inlineCode",{parentName:"p"},"Executable")," support from wallet extensions, only ",(0,l.kt)("inlineCode",{parentName:"p"},"Transaction"),"s are currently supported by our wallet-bridge implementation."),(0,l.kt)("p",{parentName:"admonition"},"This means that only ",(0,l.kt)("inlineCode",{parentName:"p"},"wallet.getAccountBalance()")," is supported and that, consequently, ",(0,l.kt)("inlineCode",{parentName:"p"},"wallet.getAccountInfo()")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"wallet.getAccountRecords()")," are not."),(0,l.kt)("p",{parentName:"admonition"},"This also means that contract creation/querying is not currently supported. We plan on mitigating this with a future Venin release by augmenting the data via ",(0,l.kt)("a",{parentName:"p",href:"https://docs.hedera.com/guides/docs/mirror-node-api/rest-api"},"a mirror-node response"),".")),(0,l.kt)("h2",{id:"under-the-hood"},"Under the hood"),(0,l.kt)("admonition",{type:"caution"},(0,l.kt)("p",{parentName:"admonition"},"This feature is currently in active development. As such, it is very likely that the final API, once the stable release hits the streets, will differ.")),(0,l.kt)("p",null,"Based on the original HIP-338 proposal, we went on and simplified the overall ",(0,l.kt)("inlineCode",{parentName:"p"},"Wallet")," interface to a ",(0,l.kt)("inlineCode",{parentName:"p"},"StratoWallet")," which only currently knows 2 operations:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"executing ",(0,l.kt)("inlineCode",{parentName:"li"},"Transaction"),"s and ",(0,l.kt)("inlineCode",{parentName:"li"},"Query"),"s"),(0,l.kt)("li",{parentName:"ul"},"getting a ",(0,l.kt)("inlineCode",{parentName:"li"},"TransactionReceipt")," for a ",(0,l.kt)("inlineCode",{parentName:"li"},"TransactionResponse"))),(0,l.kt)("admonition",{type:"note"},(0,l.kt)("p",{parentName:"admonition"},(0,l.kt)("inlineCode",{parentName:"p"},"Sign"),"-ing mechanics are still being designed and considered and will probably see the light of day in a future release.")),(0,l.kt)("p",null,"We then extracted away the ",(0,l.kt)("inlineCode",{parentName:"p"},"Signer")," query calls and isolated them into their own ",(0,l.kt)("inlineCode",{parentName:"p"},"SignerInfo")," interface. ",(0,l.kt)("inlineCode",{parentName:"p"},"WalletInfo")," glues everything up nicely and is made available on every session at ",(0,l.kt)("inlineCode",{parentName:"p"},"ApiSession.wallet"),"."),(0,l.kt)(r.G,{chart:" classDiagram\n  direction TB\n\n  WalletInfo o-- SignerInfo\n  WalletInfo <|-- StratoWallet\n\n  class SignerInfo {\n    <<interface>>\n    +getLedgerId() LedgerId\n    +getAccountId() AccountId\n    +getNetwork()\n    +getMirrorNetwork() string[]\n    +getAccountBalance() Promise(AccountBalance)\n    +getAccountInfo() Promise(AccountInfo)\n    +getAccountRecords() Promise(TransactionRecord[])\n  }\n\n  class WalletInfo {\n    <<interface>>\n    +account PublicAccountInfo\n    +signer SignerInfo\n  }\n\n  class StratoWallet {\n    <<interface>>\n    +execute(Transaction|Query) Promise(...)\n    +getReceipt(TransactionResponse) Promise(TransactionReceipt)\n  }",mdxType:"Mermaid"}),(0,l.kt)("h2",{id:"configuring"},"Configuring"),(0,l.kt)("p",null,"As seen above, there are currently 2 types of ",(0,l.kt)("inlineCode",{parentName:"p"},"wallet")," backends:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"a, default, ",(0,l.kt)("inlineCode",{parentName:"li"},"Sdk")," one which uses a re-implemented version of Hedera's ",(0,l.kt)("inlineCode",{parentName:"li"},"LocalWallet")," and ",(0,l.kt)("inlineCode",{parentName:"li"},"LocalProvider")," to also work with ",(0,l.kt)("inlineCode",{parentName:"li"},"customnet")," networks"),(0,l.kt)("li",{parentName:"ul"},"a ",(0,l.kt)("inlineCode",{parentName:"li"},"Browser")," one which, when selected, looks at a global ",(0,l.kt)("inlineCode",{parentName:"li"},"window.hedera")," object and uses that as the ",(0,l.kt)("inlineCode",{parentName:"li"},"Wallet")," sync for all transactions of that particular session")),(0,l.kt)("admonition",{type:"note"},(0,l.kt)("p",{parentName:"admonition"},"For ",(0,l.kt)("inlineCode",{parentName:"p"},"Browser")," wallets, property names can be changed via the ",(0,l.kt)("inlineCode",{parentName:"p"},"HEDERAS_WALLET_WINDOW_PROPERTY_NAME"),"/",(0,l.kt)("inlineCode",{parentName:"p"},"wallet.window.propName")," config.")),(0,l.kt)("p",null,"The code for the HashPack HIP-338 wallet-bridge used in this page can be ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/buidler-labs/hashgraph-venin-js/tree/va/hip-338/lib.docs/src/hashconnect"},"found here"),". In the future, this will most likely be contained within the hashconnect codebase for obvious reasons."))}b.isMDXComponent=!0}}]);