"use strict";(self.webpackChunk_buidlerlabs_hedera_strato_docs=self.webpackChunk_buidlerlabs_hedera_strato_docs||[]).push([[144],{5162:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(7294),i=n(6010);const r="tabItem_Ymn6";function o(e){var t=e.children,n=e.hidden,o=e.className;return a.createElement("div",{role:"tabpanel",className:(0,i.Z)(r,o),hidden:n},t)}},5488:(e,t,n)=>{n.d(t,{Z:()=>m});var a=n(7462),i=n(7294),r=n(6010),o=n(2389),l=n(7392),s=n(7094),u=n(2466);const c="tabList__CuJ",d="tabItem_LNqP";function p(e){var t,n,o=e.lazy,p=e.block,m=e.defaultValue,h=e.values,k=e.groupId,v=e.className,f=i.Children.map(e.children,(function(e){if((0,i.isValidElement)(e)&&"value"in e.props)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),b=null!=h?h:f.map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes}})),g=(0,l.l)(b,(function(e,t){return e.value===t.value}));if(g.length>0)throw new Error('Docusaurus error: Duplicate values "'+g.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var y=null===m?m:null!=(t=null!=m?m:null==(n=f.find((function(e){return e.props.default})))?void 0:n.props.value)?t:f[0].props.value;if(null!==y&&!b.some((function(e){return e.value===y})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+y+'" but none of its children has the corresponding value. Available values are: '+b.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var w=(0,s.U)(),E=w.tabGroupChoices,N=w.setTabGroupChoices,C=(0,i.useState)(y),T=C[0],A=C[1],_=[],S=(0,u.o5)().blockElementScrollPositionUntilNextRender;if(null!=k){var L=E[k];null!=L&&L!==T&&b.some((function(e){return e.value===L}))&&A(L)}var R=function(e){var t=e.currentTarget,n=_.indexOf(t),a=b[n].value;a!==T&&(S(t),A(a),null!=k&&N(k,String(a)))},D=function(e){var t,n=null;switch(e.key){case"ArrowRight":var a,i=_.indexOf(e.currentTarget)+1;n=null!=(a=_[i])?a:_[0];break;case"ArrowLeft":var r,o=_.indexOf(e.currentTarget)-1;n=null!=(r=_[o])?r:_[_.length-1]}null==(t=n)||t.focus()};return i.createElement("div",{className:(0,r.Z)("tabs-container",c)},i.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":p},v)},b.map((function(e){var t=e.value,n=e.label,o=e.attributes;return i.createElement("li",(0,a.Z)({role:"tab",tabIndex:T===t?0:-1,"aria-selected":T===t,key:t,ref:function(e){return _.push(e)},onKeyDown:D,onFocus:R,onClick:R},o,{className:(0,r.Z)("tabs__item",d,null==o?void 0:o.className,{"tabs__item--active":T===t})}),null!=n?n:t)}))),o?(0,i.cloneElement)(f.filter((function(e){return e.props.value===T}))[0],{className:"margin-top--md"}):i.createElement("div",{className:"margin-top--md"},f.map((function(e,t){return(0,i.cloneElement)(e,{key:t,hidden:e.props.value!==T})}))))}function m(e){var t=(0,o.Z)();return i.createElement(p,(0,a.Z)({key:String(t)},e))}},5848:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>m,contentTitle:()=>d,default:()=>v,frontMatter:()=>c,metadata:()=>p,toc:()=>h});var a=n(7462),i=n(3366),r=(n(7294),n(3905)),o=n(5488),l=n(5162),s=n(1839),u=["components"],c={id:"quick-start",title:"Quick Start"},d=void 0,p={unversionedId:"markdown/quick-start",id:"markdown/quick-start",title:"Quick Start",description:"Installing",source:"@site/src.docs/markdown/quick-start.md",sourceDirName:"markdown",slug:"/markdown/quick-start",permalink:"/markdown/quick-start",draft:!1,editUrl:"https://github.com/buidler-labs/hedera-strato-docs/edit/main/src.docs/markdown/quick-start.md",tags:[],version:"current",lastUpdatedBy:"Victor ADASCALITEI",lastUpdatedAt:1665499930,formattedLastUpdatedAt:"Oct 11, 2022",frontMatter:{id:"quick-start",title:"Quick Start"},sidebar:"docs",previous:{title:"\ud83d\udd2d Welcome to Strato! \ud83c\udf0c",permalink:"/"},next:{title:"Configuring",permalink:"/markdown/configuration"}},m={},h=[{value:"Installing",id:"installing",level:2},{value:"Hello Strato",id:"hello-strato",level:2},{value:"Architecture",id:"architecture",level:2},{value:"Next up",id:"next-up",level:2}],k={toc:h};function v(e){var t=e.components,n=(0,i.Z)(e,u);return(0,r.kt)("wrapper",(0,a.Z)({},k,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"installing"},"Installing"),(0,r.kt)("p",null,"Your normal"),(0,r.kt)(o.Z,{groupId:"npm2yarn",mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"npm",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm install @buidlerlabs/hedera-strato-js\n"))),(0,r.kt)(l.Z,{value:"yarn",label:"Yarn",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"yarn add @buidlerlabs/hedera-strato-js\n")))),(0,r.kt)("p",null,"will suffice."),(0,r.kt)("h2",{id:"hello-strato"},"Hello Strato"),(0,r.kt)("p",null,"As we've seen in our introductory page, firing up your first Strato smart-contract example should be straight forward but let's kick it up a notch to make things a little more interesting. Suppose you have a trimmed down version (comments & ",(0,r.kt)("inlineCode",{parentName:"p"},"dec")," method stripped) of ",(0,r.kt)("a",{parentName:"p",href:"https://solidity-by-example.org/first-app/"},"the following contract"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol",metastring:'title="./increment.sol"',title:'"./increment.sol"'},"// SPDX-License-Identifier: MIT\npragma solidity ^0.8.9;\n\ncontract Counter {\n  uint public count;\n\n  function get() public view returns (uint) {\n    return count;\n  }\n\n  function inc() public {\n    count += 1;\n  }\n}\n")),(0,r.kt)("p",null,"Instead of having a value that we read from the contract, we have state-mutating methods and a way to query the inner state which is much closer to production scenarios and, therefore, much more useful for our learning journey."),(0,r.kt)("p",null,"Interacting with it via Strato could be as simple as:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:"live=true containerKey=increment_from_path",live:"true",containerKey:"increment_from_path"},'const { session } = await ApiSession.default();\nconst counterContract = await Contract.newFrom({ path: "./increment.sol" });\nconst liveContract = await session.upload(counterContract);\n\n// Increment then retrieve the counter\nawait liveContract.inc();\nlog(await liveContract.get());\n')),(0,r.kt)("p",null,"By convention, when calling ",(0,r.kt)("inlineCode",{parentName:"p"},"Contract.newFrom")," and passing it a ",(0,r.kt)("inlineCode",{parentName:"p"},"path")," of a ",(0,r.kt)("inlineCode",{parentName:"p"},".sol")," file, Strato expects to find the solidity contract code in the ",(0,r.kt)("inlineCode",{parentName:"p"},"contracts")," folder. This is configurable via the ",(0,r.kt)("inlineCode",{parentName:"p"},"HEDERAS_CONTRACTS_RELATIVE_PATH")," environment variable."),(0,r.kt)("p",null,"If you were to run this code snippet, you would end up with a complaint issued by ",(0,r.kt)("inlineCode",{parentName:"p"},"ApiSession.default")," saying something about a network not available issue. That's because Strato does not know, out of the box, to which network you want to connect."),(0,r.kt)("p",null,"We'll discuss configuration aspects in the upcoming page, but for now, to make this running, just create a ",(0,r.kt)("inlineCode",{parentName:"p"},".env")," file in your project root directory and have the following values defined:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"HEDERAS_NETWORK=testnet\nHEDERAS_OPERATOR_ID=0.0...\nHEDERAS_OPERATOR_KEY=302e02...\n")),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Further notes on the ",(0,r.kt)("code",null,".env")," config used by the code present in the ",(0,r.kt)("code",null,"Live Editor")," boxes"),"Together with the above mentioned credentials, the following options have been overwritten/defined:",(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"  HEDERAS_DEFAULT_CONTRACT_REQUESTS_RETURN_ONLY_RECEIPTS=false\n  HEDERAS_DEFAULT_PAYMENT_FOR_CONTRACT_QUERY=1000000\n  HEDERAS_LOGGER_LEVEL=debug\n  HEDERAS_LOGGER_ENABLED=true\n")),(0,r.kt)("p",null,"You can head over to ",(0,r.kt)("a",{parentName:"p",href:"/markdown/configuration"},"the config page")," for a detailed explanation of what these (along with other) settings translate to.")),(0,r.kt)("p",null,"Make sure to replace the values as you see fit:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"HEDERAS_NETWORK")," : can be either one of the official networks (",(0,r.kt)("inlineCode",{parentName:"li"},"previewnet"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"testnet")," or ",(0,r.kt)("inlineCode",{parentName:"li"},"mainnet"),") or, for a more close-tight experience, ",(0,r.kt)("inlineCode",{parentName:"li"},"customnet")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"HEDERAS_OPERATOR_ID")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"HEDERAS_OPERATOR_KEY")," are the operator's account id and private key which will pay for the transactions.")),(0,r.kt)("p",null,"If you don't have a pair of operator credentials, you can create a ",(0,r.kt)("inlineCode",{parentName:"p"},"testnet"),"/",(0,r.kt)("inlineCode",{parentName:"p"},"previewnet")," account for free if you register on the ",(0,r.kt)("a",{parentName:"p",href:"https://portal.hedera.com/register"},"Hedera Portal"),". Once created, your test-account will auto top-up daily, free of charge, to ",(0,r.kt)("inlineCode",{parentName:"p"},"10000"),"\u210f."),(0,r.kt)("p",null,"Having the ",(0,r.kt)("inlineCode",{parentName:"p"},".env")," file available with the required values is enough to allow for successfully re-running the above example."),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"If working locally and want to see a bit more console activity of what's happening underneath the hood, you can enable the logger and setup a sensible threshold by also adding to ",(0,r.kt)("inlineCode",{parentName:"p"},".env")," the following values:"),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre"},"HEDERAS_LOGGER_LEVEL=debug\nHEDERAS_LOGGER_ENABLED=true\n"))),(0,r.kt)("h2",{id:"architecture"},"Architecture"),(0,r.kt)("p",null,"Before we move on, it's worth talking here a bit about Strato's envisioned design:"),(0,r.kt)(s.G,{chart:"classDiagram\n  class Account\n  class ApiSession {\n    +LiveEntity<T> upload(what: UploadableEntity<T>)\n    +LiveEntity<T> create(what: CreatableEntity<T>)\n  }\n  class BasicCreatableEntity {\n    +name: string\n  }\n  class BasicUploadableEntity {\n    +nameOfUpload: string\n  }\n  class Contract\n  class CreatableEntity {\n    <<interface>>\n  }\n  class File\n  class Json\n  class LiveAccount\n  class LiveContract\n  class LiveEntity\n  class LiveJson\n  class LiveToken\n  class UploadableEntity {\n    <<interface>>\n  }\n  class SolidityAddressable {\n    <<interface>>\n    getSolidityAddress() string\n  }\n  class Token\n  class Topic\n\n  SolidityAddressable <|.. ApiSession\n  ApiSession -- CreatableEntity\n  ApiSession -- UploadableEntity\n  ApiSession -- LiveEntity\n  CreatableEntity <|-- BasicCreatableEntity\n  BasicCreatableEntity <|-- Account\n  BasicCreatableEntity <|-- Token\n  BasicCreatableEntity <|-- Topic\n  SolidityAddressable <|.. LiveEntity\n  LiveEntity <|-- LiveAccount\n  LiveEntity <|-- LiveContract\n  LiveEntity <|-- LiveFile\n  LiveFile <|-- LiveJson\n  LiveEntity <|-- LiveToken\n  UploadableEntity <|-- BasicUploadableEntity\n  BasicUploadableEntity <|-- Contract\n  BasicUploadableEntity <|-- File\n  BasicUploadableEntity <|-- Json",mdxType:"Mermaid"}),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"This is just a high level overview that helps arguing the library architecture decisions for most of the developer use-cases. It is, by no means, complete. More sophisticated entities such as ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/buidler-labs/hedera-strato-js/tree/main/lib/core/wallet"},"the ",(0,r.kt)("inlineCode",{parentName:"a"},"StratoWallet")," interface")," (which helps configure the underlying network layer aiding ",(0,r.kt)("a",{parentName:"p",href:"/markdown/guides/wallet"},"the wallet bridge")," in the process) have been excluded from the diagram."),(0,r.kt)("p",{parentName:"admonition"},"This has been done both to conserve pixels and due to the fact that those entities are still in development.")),(0,r.kt)("p",null,"Basically, we tried to walk away from the ",(0,r.kt)("em",{parentName:"p"},"builder")," feel given by working with the official Hedera SDK and move towards a more ",(0,r.kt)("em",{parentName:"p"},"mapping")," kind of approach which, hopefully, should be more familiar to how Object Oriented Programing solutions are thought. This means that, instead of having"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"new FileCreateTransaction()\n  .setKeys([client.operatorPublicKey])\n  .setContents(contractByteCode)\n  .execute(client);\n")),(0,r.kt)("p",null,"we tweaked and reversed the execution to have"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"session.upload(contract);\n")),(0,r.kt)("p",null,"which would better approximate the mechanics of"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"instance = session.newInstance(class)\n")),(0,r.kt)("p",null,"with ",(0,r.kt)("inlineCode",{parentName:"p"},"instance")," being the ",(0,r.kt)("inlineCode",{parentName:"p"},"live"),", hedera-deployed, runtime object and ",(0,r.kt)("inlineCode",{parentName:"p"},"class")," being the blueprint of whatever needs to be constructed on the network (eg. ",(0,r.kt)("inlineCode",{parentName:"p"},"Token")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"Contract"),")."),(0,r.kt)("p",null,"Having said that, depending on the Hedera targeted service, there are 2 types of entities in the library:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"static entities - which are further down differentiable into ",(0,r.kt)("inlineCode",{parentName:"li"},"CreatableEntity"),"s and ",(0,r.kt)("inlineCode",{parentName:"li"},"UploadableEntity"),"s"),(0,r.kt)("li",{parentName:"ul"},'live entities - which are the "resulting instances" of having the ',(0,r.kt)("em",{parentName:"li"},"static entities")," deployed")),(0,r.kt)("h2",{id:"next-up"},"Next up"),(0,r.kt)("p",null,"Now that we've discussed a bit about installing and running some Strato code as well as the overall design vision of the library, it's high time we have a look at configuring/customizing a runtime ",(0,r.kt)("inlineCode",{parentName:"p"},"ApiSession"),"."))}v.isMDXComponent=!0}}]);